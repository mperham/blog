<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <meta name="generator" content="Hugo 0.146.6"><meta property="og:url" content="https://www.mikeperham.com/2007/09/29/accessing-ldap-from-ruby/">
  <meta property="og:site_name" content="Mike Perham">
  <meta property="og:title" content="Accessing LDAP from Ruby">
  <meta property="og:description" content="Ok, we‚Äôve got our nifty Apache DS running with some custom data. This doesn‚Äôt do much unless our application can access the data in order to perform some sort of logic. So let‚Äôs connect the two worlds!
Make sure your Apache DS server is up and running. We first need to install a Ruby API for accessing LDAP. I found the simplest to use was ruby-net-ldap:
gem install ruby-net-ldap
Next, create a simple ldaptest.rb file to use the API:">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="post">
    <meta property="article:published_time" content="2007-09-29T00:00:00+00:00">
    <meta property="article:modified_time" content="2007-09-29T00:00:00+00:00">

  <meta name="description" content="Ruby, OSS and the Internet">
  

  
  <link rel="apple-touch-icon" sizes="180x180" href="https://www.mikeperham.com/apple-touch-icon.png">

  
  <link rel="icon" type="image/png" sizes="32x32" href="https://www.mikeperham.com/favicon-32x32.png">

  
  <link rel="icon" type="image/png" sizes="16x16" href="https://www.mikeperham.com/favicon-16x16.png">

  
  <link rel="manifest" href="https://www.mikeperham.com/site.webmanifest">

  
  <link rel="mask-icon" href="https://www.mikeperham.com/safari-pinned-tab.svg" color="#5bbad5">

  <meta name="msapplication-TileColor" content="#da532c">

  <meta name="theme-color" content="#ffffff">

  
  <link rel="stylesheet" href="/css/bootstrap.min.css" integrity="sha384-zCbKRCUGaJDkqS1kPbPd7TveP5iyJE0EjAuZQTgFLD2ylzuqKfdKlfG/eSrtxUkn" crossorigin="anonymous">
  <link rel="alternate" type="application/rss+xml" href="https://mikeperham.com/index.xml" title="Mike Perham">

  
  <title>Accessing LDAP from Ruby | Mike Perham</title>
  

  <style>
body {
  min-width: 300px;
  font-size: 19px;
}

.publish-date {
  font-family: monospace;
  font-size: 0.8em;
  margin-right: 0.5em;
}

.custom-navbar {
  margin-bottom: 1em;
}

@media print {
  .custom-navbar {
    display: none;
  }
}

img {
  max-width: 100%;
}


body {
  background-color: #fff;
}



body {
  color: #212529;
}



a {
  color: #007bff;
}



a:hover,
a:focus {
  color: #0056b3;
}



.custom-navbar {
  background-color: #212529;
}



.custom-navbar a {
  color: rgba(255, 255, 255, 0.75);
}



.custom-navbar a:hover,
.custom-navbar a:focus {
  color: rgba(255, 255, 255, 1);
}



.container {
  max-width: 960px;
}



pre {
  display: block;
  padding: 9.5px;
  word-break: break-all;
  word-wrap: break-word;
  background-color: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 4px;
}

pre code {
  padding: 0;
  font-size: inherit;
  color: inherit; 
  white-space: pre-wrap;
  background-color: transparent;
  border: none;
  border-radius: 0;
}

code {
  padding: 2px 4px;
  color: inherit; 
  background-color: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 4px;
  font-size: .9em;
}



blockquote,
.blockquote {
  padding: 10px 20px;
  margin: 0 0 20px;
  font-size: 1em;
  border-left: 5px solid #6c757d;
}

</style>

</head>


<body>
  <nav class="custom-navbar navbar navbar-expand-md navbar-dark bg-dark">
  <div class="container">
    <a class="navbar-brand mr-0" href="/">Mike Perham</a>
    <ul class="navbar-nav d-flex flex-row">
      <li class="nav-item"><a class="nav-link" title="Sidekiq" href="https://sidekiq.org">Sidekiqü•ã</a></li>
      <li class="nav-item"><a class="nav-link" title="Faktory" href="https://contribsys.com/faktory">Faktoryüè≠</a></li>
    </ul>
    <ul class="navbar-nav float-right d-none d-md-flex">
      
      <li class="nav-item"><a class="nav-link" href="mailto:mike@perham.net">üìß Email</a></li>
      <li class="nav-item"><a class="nav-link" rel="me" href="https://ruby.social/@getajobmike">üì£ Mastodon</a></li>
      <li class="nav-item"><a class="nav-link" href="/index.xml" title="RSS"><img src="/images/rss.png" width="16"
            height="16" /> RSS</a></li>
      <li class="nav-item d-none d-md-flex"><a class="nav-link" title="About" href="/about/">‚ùì</a></li>
    </ul>
  </div>
</nav>
  
  <div class="container">
    <article>
      <h1>Accessing LDAP from Ruby</h1>
<p>
  <small class="text-secondary">
  
  
  2007-09-29
  </small>
  
</p>
<p>Ok, we&rsquo;ve got our nifty Apache DS running with some custom data. This doesn&rsquo;t do much unless our application can access the data in order to perform some sort of logic. So let&rsquo;s connect the two worlds!</p>
<p>Make sure your Apache DS server is up and running. We first need to install a Ruby API for accessing LDAP. I found the simplest to use was ruby-net-ldap:</p>
<blockquote>
<p>gem install ruby-net-ldap</p></blockquote>
<p>Next, create a simple ldaptest.rb file to use the API:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ruby" data-lang="ruby"><span style="display:flex;"><span>require <span style="color:#e6db74">&#39;net/ldap&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>username <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;uid=admin,ou=system&#39;</span>
</span></span><span style="display:flex;"><span>password <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;secret&#39;</span>
</span></span><span style="display:flex;"><span>ldap_con <span style="color:#f92672">=</span> <span style="color:#66d9ef">Net</span><span style="color:#f92672">::</span><span style="color:#66d9ef">LDAP</span><span style="color:#f92672">.</span>new( {<span style="color:#e6db74">:host</span> <span style="color:#f92672">=&gt;</span> <span style="color:#e6db74">&#39;localhost&#39;</span>, <span style="color:#e6db74">:port</span> <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">10389</span>, <span style="color:#e6db74">:auth</span> <span style="color:#f92672">=&gt;</span>
</span></span><span style="display:flex;"><span>    { <span style="color:#e6db74">:method</span> <span style="color:#f92672">=&gt;</span> <span style="color:#e6db74">:simple</span>, <span style="color:#e6db74">:username</span> <span style="color:#f92672">=&gt;</span> username, <span style="color:#e6db74">:password</span> <span style="color:#f92672">=&gt;</span> password }} )
</span></span><span style="display:flex;"><span>treebase <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;dc=fiveruns,dc=com&#34;</span>
</span></span><span style="display:flex;"><span>op_filter <span style="color:#f92672">=</span> <span style="color:#66d9ef">Net</span><span style="color:#f92672">::</span><span style="color:#66d9ef">LDAP</span><span style="color:#f92672">::</span><span style="color:#66d9ef">Filter</span><span style="color:#f92672">.</span>eq( <span style="color:#e6db74">&#34;objectClass&#34;</span>, <span style="color:#e6db74">&#34;person&#34;</span> )
</span></span><span style="display:flex;"><span>ldap_con<span style="color:#f92672">.</span>search( <span style="color:#e6db74">:base</span> <span style="color:#f92672">=&gt;</span> treebase, <span style="color:#e6db74">:filter</span> <span style="color:#f92672">=&gt;</span> op_filter, <span style="color:#e6db74">:attributes</span> <span style="color:#f92672">=&gt;</span> <span style="color:#e6db74">&#39;dn&#39;</span>) <span style="color:#66d9ef">do</span> <span style="color:#f92672">|</span>entry<span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span>  puts <span style="color:#e6db74">&#34;DN: </span><span style="color:#e6db74">#{</span>entry<span style="color:#f92672">.</span>dn<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">end</span>
</span></span></code></pre></div><p>Running it should give this output:</p>
<blockquote>
<p>mikeperham:~$ ruby -rubygems ldaptest.rb<br>
DN: uid=mike,ou=engineering,dc=fiveruns,dc=com</p></blockquote>
<p>It works! Everything from this point on is just gravy. You can explore the <a href="http://www.gemjack.com/gems/ruby-net-ldap-0.0.4/index.html">ruby-net-ldap rdoc</a> in more depth or try more advanced libraries like <a href="http://wiki.rubyonrails.org/rails/pages/ActiveLDAP">ActiveLdap</a>.</p>

    </article>
  </div>

  

</body>

</html>
