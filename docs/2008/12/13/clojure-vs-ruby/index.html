  <!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
    <title> Clojure vs Ruby, Part I </title>
    
    <link rel="stylesheet" href="https://www.mikeperham.com/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://www.mikeperham.com/css/theme.css" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" />
    
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="../../../../images/headshot-icon.png">
    <link rel="shortcut icon" href="../../../../favicon.ico">
    
    <link href="" rel="alternate" type="application/rss+xml" title="Mike Perham" />
</head>

  <body>
    <nav class="navbar navbar-default navbar-fixed-top">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-right">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://www.mikeperham.com">Mike Perham</a>
        </div>
        <div class="collapse navbar-collapse" id="navbar-right">
            <ul class="nav navbar-nav navbar-right">
                
                    <li><a href="https://sidekiq.org/" >Sidekiq</a></li>
                
                    <li><a href="http://contribsys.com/faktory/" >Faktory</a></li>
                
                    <li><a href="../../../../about/" >About</a></li>
                
                
            </ul>
        </div>
    </div>
</nav>

    <div class="container page-wrap">
      <h1>Clojure vs Ruby, Part I</h1>
      <small class="post-meta">Dec 13, 2008</small>
      <div class="post-content">
        <p>I'm a performance guy, I'll admit it. I love performance tuning and comparing code to see why one thing is slower than another. I've recently taken a shine to the Clojure programming language as it seems to combine two good things: an incredibly fast and reliable VM and a functional language designed for concurrency. Here's my first performance test: the ever-reliable fibonacci method. Please remember this is just a microbenchmark, take it with a grain of salt.</p>

<p>In Clojure:</p>

<pre lang="lisp">(defn fib [n]
    (if (&lt;= n 1)
        1
        (+ (fib (- n 1)) (fib (- n 2)))
    )
)
</pre>

<p>In Ruby:</p>

<pre lang="ruby">def fib(n)
  return 1 if n &lt;= 1
  fib(n-1) + fib(n-2)
end
</pre>

<p>The JVM is Server 1.6.0_07 64-bit. Let's see how long each takes to calculate the 40th Fibonacci number:</p>

<pre>C (gcc 4.0.1)         2.6 sec
Java                  1.2 sec
Clojure 20080916     11.3 sec
Ruby 1.9pr1          44.3 sec
JRuby 1.1.5         118.1 sec
Ruby 1.8.6          195.6 sec
</pre>

<p>Clojure's performance is really spectacular in this one microbenchmark compared to Ruby. There's some language overhead but the native speed is so fast that performance is still better than the fastest Ruby VMs. Rich Hickey has done a great job with Clojure but make no mistake, this is still mostly a hobbyist language done by one person - he can't afford to spend years building his own VM. Running native on the JVM has huge benefits in terms of performance.</p>

        <div id="disqus_thread"></div>
<script>
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "mikeperham" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
      </div>
    </div>
    <footer class="site-footer">
	<div class="container">
		<h4>Mike Perham</h4>
		<div class="row">
			<div class="col-md-3">
				<div class="form-group">
					<p>Ruby, OSS and the Internet</p>
					<a href="mailto:mperham@gmail.com">mperham@gmail.com</a>
				</div>
			</div>
			<div class="col-md-3">
				<div class="form-group">
					<p>
						<span class="fa fa-fw fa-github"></span>
						<a href="https://github.com/mperham">mperham</a>
            <br/>
						<span class="fa fa-fw fa-twitter"></span>
						<a href="https://twitter.com/mperham">mperham</a>
					</p>
				</div>
			</div>
		</div>
	</div>
</footer>

    <script src="https://www.mikeperham.com/js/jquery-2.1.4.min.js"></script>
<script src="https://www.mikeperham.com/js/bootstrap.min.js"></script>

  </body>
</html>
